// <auto-generated/>
#nullable enable
using {{ namespace }}.Dtos;
using {{ namespace }}.Requests;

namespace {{ namespace }}.Controllers
{
    [Microsoft.AspNetCore.Mvc.Route("[controller]")]
    public sealed class {{ name }} : Microsoft.AspNetCore.Mvc.Controller
    {
        private readonly MediatR.IMediator _mediator;

        public {{ name }}(MediatR.IMediator mediator)
        {
            _mediator = mediator;
        }

        {%- for endpoint in endpoints %}
        
        /// <summary>
        {%- for description_line in endpoint.description %}
        /// {% unless forloop.first %}<br/>{% endunless %}{{ description_line }}
        {%- endfor %}
        /// </summary>
        {%- for parameter in endpoint.all_request_parameters %}
        /// <param name="{{ parameter.parameter_name }}">{{ parameter.description | join: "<br/>" }}</param>
        {%- endfor %}
        /// <returns>{{ endpoint.response_description | join: "<br/>" }}</returns>
        [Microsoft.AspNetCore.Mvc.Http{{ endpoint.operation_name }}("{{ endpoint.path }}")]
        public async System.Threading.Tasks.Task<Microsoft.AspNetCore.Mvc.ActionResult> {{ endpoint.name }}(
            {%- for parameter in endpoint.all_request_parameters -%}
                {{ parameter.attribute }}{{ parameter.data_type }}{%- if parameter.is_nullable -%}?{%- endif %} {{ parameter.parameter_name }}
            {%- unless forloop.last  %}, {% endunless -%}
            {%- endfor -%}
            {%- if endpoint.all_request_parameters.size != 0 -%}, {% endif -%}System.Threading.CancellationToken cancellationToken)
        {
            var request = new {{ endpoint.mediator_request_name }}(
                {%- for parameter in endpoint.all_request_parameters -%}
                    {{ parameter.parameter_name }}
                {%- unless forloop.last  %}, {% endunless -%}
                {% endfor %});
            var response = await _mediator.Send(request, cancellationToken);
            return Ok(response);
        }
        {%- endfor %}
    }
}